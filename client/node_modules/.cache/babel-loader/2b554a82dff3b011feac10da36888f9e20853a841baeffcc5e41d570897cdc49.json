{"ast":null,"code":"import React from\"react\";import{Card,CardContent,CardMedia,Typography,Button}from\"@mui/material\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import config from\"../config\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Blog=_ref=>{let{id,title,description,image,isUser,user}=_ref;const navigate=useNavigate();const handleEdit=()=>navigate(\"/blogs/edit/\".concat(id));const handleView=()=>navigate(\"/blogs/\".concat(id));const handleDelete=async()=>{if(!window.confirm(\"Delete this post?\"))return;try{const token=localStorage.getItem(\"token\");await axios.delete(\"\".concat(config.BASE_URL,\"/api/blogs/\").concat(id),{headers:{Authorization:\"Bearer \".concat(token)}});window.location.reload();}catch(err){console.error(\"Delete failed:\",err);alert(\"Delete failed\");}};const getImageUrl=img=>{if(!img)return\"\";if(img.startsWith(\"http\"))return img;return\"\".concat(config.BASE_URL.replace(/\\/+$/,\"\")).concat(img.startsWith(\"/\")?img:\"/\".concat(img));};return/*#__PURE__*/_jsxs(Card,{className:\"card\",style:{marginBottom:\"20px\"},children:[image&&/*#__PURE__*/_jsx(CardMedia,{component:\"img\",height:\"200\",image:getImageUrl(image),alt:title,style:{objectFit:\"cover\"}}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:title}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:description}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",display:\"block\",children:[\"By: \",(user===null||user===void 0?void 0:user.name)||\"Unknown\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10,textAlign:\"right\"},children:[/*#__PURE__*/_jsx(Button,{onClick:handleView,children:\"View\"}),isUser&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleEdit,children:\"Edit\"}),/*#__PURE__*/_jsx(Button,{color:\"error\",onClick:handleDelete,children:\"Delete\"})]})]})]})]});};export default Blog;","map":{"version":3,"names":["React","Card","CardContent","CardMedia","Typography","Button","useNavigate","axios","config","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Blog","_ref","id","title","description","image","isUser","user","navigate","handleEdit","concat","handleView","handleDelete","window","confirm","token","localStorage","getItem","delete","BASE_URL","headers","Authorization","location","reload","err","console","error","alert","getImageUrl","img","startsWith","replace","className","style","marginBottom","children","component","height","alt","objectFit","variant","color","display","name","marginTop","textAlign","onClick"],"sources":["C:/Users/user/Desktop/projects/blog-app/client/src/components/Blog.js"],"sourcesContent":["import React from \"react\";\nimport { Card, CardContent, CardMedia, Typography, Button } from \"@mui/material\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport config from \"../config\";\n\nconst Blog = ({ id, title, description, image, isUser, user }) => {\n  const navigate = useNavigate();\n\n  const handleEdit = () => navigate(`/blogs/edit/${id}`);\n  const handleView = () => navigate(`/blogs/${id}`);\n\n  const handleDelete = async () => {\n    if (!window.confirm(\"Delete this post?\")) return;\n    try {\n      const token = localStorage.getItem(\"token\");\n      await axios.delete(`${config.BASE_URL}/api/blogs/${id}`, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      window.location.reload();\n    } catch (err) {\n      console.error(\"Delete failed:\", err);\n      alert(\"Delete failed\");\n    }\n  };\n\n  const getImageUrl = (img) => {\n    if (!img) return \"\"; \n    if (img.startsWith(\"http\")) return img;\n     return `${config.BASE_URL.replace(/\\/+$/, \"\")}${img.startsWith(\"/\") ? img : `/${img}`}`;\n  };\n\n  return (\n    <Card className=\"card\" style={{ marginBottom: \"20px\" }}>\n      {image && (\n        <CardMedia\n          component=\"img\"\n          height=\"200\"\n          image={getImageUrl(image)}\n          alt={title}\n          style={{ objectFit: \"cover\" }}\n        />\n      )}\n      <CardContent>\n        <Typography variant=\"h6\">{title}</Typography>\n        <Typography variant=\"body2\" color=\"textSecondary\">\n          {description}\n        </Typography>\n        <Typography variant=\"caption\" display=\"block\">\n          By: {user?.name || \"Unknown\"}\n        </Typography>\n\n        <div style={{ marginTop: 10, textAlign: \"right\" }}>\n          <Button onClick={handleView}>View</Button>\n          {isUser && (\n            <>\n              <Button onClick={handleEdit}>Edit</Button>\n              <Button color=\"error\" onClick={handleDelete}>\n                Delete\n              </Button>\n            </>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default Blog;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}