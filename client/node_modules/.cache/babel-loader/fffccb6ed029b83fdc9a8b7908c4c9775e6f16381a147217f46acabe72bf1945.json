{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import config from\"../config\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserBlogs=()=>{const[blogs,setBlogs]=useState([]);const navigate=useNavigate();const userId=localStorage.getItem(\"userId\");const getImageUrl=img=>{if(!img)return\"\";if(img.startsWith(\"http\"))return img;return\"\".concat(config.BASE_URL.replace(/\\/+$/,\"\")).concat(img.startsWith(\"/\")?img:\"/\".concat(img));};useEffect(()=>{const f=async()=>{try{const res=await axios.get(\"\".concat(config.BASE_URL,\"/api/blogs/user/\").concat(userId));setBlogs(res.data.blogs||[]);}catch(err){console.error(err);}};if(userId)f();},[userId]);const handleEdit=id=>navigate(\"/blogs/edit/\".concat(id));const handleDelete=async id=>{if(!window.confirm(\"Delete?\"))return;try{const token=localStorage.getItem(\"token\");await axios.delete(\"\".concat(config.BASE_URL,\"/api/blogs/\").concat(id),{headers:{Authorization:\"Bearer \".concat(token)}});setBlogs(prev=>prev.filter(b=>b._id!==id));}catch(err){console.error(err);alert(\"Delete failed\");}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Blogs\"}),blogs.map(b=>/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:b.title}),/*#__PURE__*/_jsx(\"p\",{children:b.description}),b.image&&/*#__PURE__*/_jsx(\"img\",{src:getImageUrl(b.image),style:{maxWidth:\"100%\"},alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"right\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(b._id),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(b._id),children:\"Delete\"})]})]},b._id))]});};export default UserBlogs;","map":{"version":3,"names":["React","useEffect","useState","axios","config","useNavigate","jsx","_jsx","jsxs","_jsxs","UserBlogs","blogs","setBlogs","navigate","userId","localStorage","getItem","getImageUrl","img","startsWith","concat","BASE_URL","replace","f","res","get","data","err","console","error","handleEdit","id","handleDelete","window","confirm","token","delete","headers","Authorization","prev","filter","b","_id","alert","children","map","className","title","description","image","src","style","maxWidth","alt","textAlign","onClick"],"sources":["C:/Users/user/Desktop/projects/blog-app/client/src/components/UserBlogs.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport config from \"../config\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst UserBlogs = () => {\n  const [blogs, setBlogs] = useState([]);\n  const navigate = useNavigate();\n  const userId = localStorage.getItem(\"userId\");\n\n  const getImageUrl = (img) => {\n    if (!img) return \"\";\n    if (img.startsWith(\"http\")) return img;\n    return `${config.BASE_URL.replace(/\\/+$/, \"\")}${img.startsWith(\"/\") ? img : `/${img}`}`;\n  };\n\n  useEffect(() => {\n    const f = async () => {\n      try {\n        const res = await axios.get(`${config.BASE_URL}/api/blogs/user/${userId}`);\n        setBlogs(res.data.blogs || []);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n    if (userId) f();\n  }, [userId]);\n\n  const handleEdit = (id) => navigate(`/blogs/edit/${id}`);\n  const handleDelete = async (id) => {\n    if (!window.confirm(\"Delete?\")) return;\n    try {\n      const token = localStorage.getItem(\"token\");\n      await axios.delete(`${config.BASE_URL}/api/blogs/${id}`, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      setBlogs((prev) => prev.filter((b) => b._id !== id));\n    } catch (err) {\n      console.error(err);\n      alert(\"Delete failed\");\n    }\n  };\n\n  return (\n    <div>\n      <h2>My Blogs</h2>\n      {blogs.map((b) => (\n        <div key={b._id} className=\"card\">\n          <h3>{b.title}</h3>\n          <p>{b.description}</p>\n          {b.image && <img src={getImageUrl(b.image)} style={{ maxWidth: \"100%\" }} alt=\"\" />}\n          <div style={{ textAlign: \"right\" }}>\n            <button onClick={() => handleEdit(b._id)}>Edit</button>\n            <button onClick={() => handleDelete(b._id)}>Delete</button>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default UserBlogs;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}